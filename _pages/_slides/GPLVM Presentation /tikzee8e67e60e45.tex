\documentclass[
%% TIKZ_CLASSOPTION %%
tikz
]{standalone}
\usepackage{amsmath}
\usetikzlibrary{matrix}
%% EXTRA_TIKZ_PREAMBLE_CODE %%
\begin{document}
%% TIKZ_CODE %%
\usetikzlibrary{bayesnet}
\usetikzlibrary{arrows,automata}
  \tikz{
% nodes
 \node[obs] (x) {$X_i$};%
 \node[obs,right=of x,xshift=0.25cm] (y) {$Y_i$};
 \node[latent,left=of x,xshift=-0.15cm] (theta) {$\theta$};
 \node[latent,right=of y,xshift=0.15cm] (phi) {$\phi$};
% plate
 \plate[inner sep=0.3cm, xshift=0cm, yshift=0.12cm] {plate1} {(x) (y)} {$i = 1,\ldots, n$};
% edges
 \edge {y} {x};
 \edge {phi} {y};
 \edge {theta} {x}  }



\end{document}
